"use strict";(()=>{document.addEventListener("DOMContentLoaded",function(){function _(o){let s=o.textContent.trim().match(/(\d+(?:\.\d+)?)\s*mb/i);return s?parseFloat(s[1]):null}function $(o){let s=o.textContent.trim().match(/^(\d[\d\s]*)\s?szt\.$/);return s?parseFloat(s[1].replace(/\s+/g,"")):null}function T(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function S(o){let a=parseFloat(o.textContent.trim());if(!isNaN(a)){let s=a*10;return o.textContent=`${s}mm`,s}return null}function G(o,a){let s=a.textContent.trim();if(o.querySelectorAll('option[fs-cmsfilter-field="D\u0142ugo\u015B\u0107"]').length>0)return!0;let E=s.match(/(\d+(?:,\d+)?)\s*mb/);if(E){let g=E[1],d=document.createElement("div");return d.setAttribute("fs-cmsfilter-field","D\u0142ugo\u015B\u0107"),d.textContent=`${g}mb`,d.classList.add("hide"),o.appendChild(d),g}return console.warn("\u26A0\uFE0F Produkt nie ma d\u0142ugo\u015Bci w nazwie"),null}window.fsAttributes=window.fsAttributes||[],window.fsAttributes.push(["cmsload",async o=>{let[a]=o;async function s(){try{let x=function(t,e,r=!0){let h=document.createElement("div");h.className="filters3_item";let l=document.createElement("label");l.className="w-checkbox filters3_form-checkbox1";let f=document.createElement("div");f.className="w-checkbox-input w-checkbox-input--inputType-custom filters3_form-checkbox1-icon";let c=document.createElement("input");c.type="checkbox",c.name="filter",c.style="opacity:0;position:absolute;z-index:-1";let i=document.createElement("span");i.className="filters3_form-checkbox1-label w-form-label",i.textContent=r?`${e==="Ilo\u015B\u0107"?T(t):t}${e==="D\u0142ugo\u015B\u0107"?"mb":e==="Ilo\u015B\u0107"?" szt.":"mm"}`:`${t}`,i.setAttribute("fs-cmsfilter-field",e);let m=document.createElement("span");return m.className="filter-results-count",m.style="margin-left: 10px; font-weight: bold;",m.textContent="0",l.appendChild(f),l.appendChild(c),l.appendChild(i),l.appendChild(m),h.appendChild(l),h};var I=x;await a.renderingQueue;let E=await a.items,g=new Set,d=new Set,w=new Set,k=new Set,A=new Set;E.forEach((t,e)=>{if(!t||!t.element){console.error(`\u274C B\u0142\u0105d: item.element nie istnieje dla indeksu ${e}`,t);return}let r=t.element.querySelector('[fs-cmsfilter-field="Cena"]');if(r){let n=r.textContent?.replace(/\s/g,"").replace("z\u0142","").replace(",",".").trim(),u=parseFloat(n||"");isNaN(u)?console.warn("\u274C Nie uda\u0142o si\u0119 sparsowa\u0107 ceny:",r.textContent):r.textContent=u.toFixed(2)}t.element.querySelectorAll('[is-variant-select="true"]').forEach((n,u)=>{let X=n.closest('[role="group"]');if(X){let z=X.querySelector("label");if(z?.textContent){let b=z.textContent.trim();if(b==="MIX"){let y=n.closest(".product2_item");if(y){let B=y.querySelector('[fs-cmsfilter-field="Grubo\u015B\u0107"]');B&&(B.textContent="MIX")}}n.querySelectorAll("option").forEach(y=>{b==="D\u0142ugo\u015B\u0107"?y.setAttribute("fs-cmsfilter-field","D\u0142ugo\u015B\u0107"):(b==="Komplet"||b==="MIX")&&y.setAttribute("fs-cmsfilter-field","Ilo\u015B\u0107")})}}});let l=t.element.querySelector('[fs-cmsfilter-field="nazwa"]');if(l&&l.textContent?.includes("MIX")){let n=t.element.querySelector('[fs-cmsfilter-field="Grubo\u015B\u0107"]');n&&(n.textContent="MIX")}let f=t.element.querySelector('[fs-cmsfilter-field="Grubo\u015B\u0107"]'),c=t.element.querySelector('[fs-cmsfilter-field="Szeroko\u015B\u0107"]'),i=t.element.querySelector('[fs-cmsfilter-field="Kolor"]'),m=t.element.querySelectorAll('[fs-cmsfilter-field="Ilo\u015B\u0107"]'),D=t.element.querySelectorAll('option[fs-cmsfilter-field="D\u0142ugo\u015B\u0107"]'),C=f?.textContent==="MIX",p=G(t.element,l);if(p!==!0&&p!==null&&w.add(p),f)if(C)g.add("MIX");else{let n=S(f);n!==null&&g.add(n)}if(c){let n=S(c);n!==null&&d.add(n)}i&&i.textContent!==""&&A.add(i.textContent),D.forEach(n=>{let u=_(n);u!==null&&w.add(u.toString())}),m.forEach(n=>{let u=$(n);u!==null&&k.add(u)})});let q=document.getElementById("lista-grubosc");q?Array.from(g).sort((t,e)=>t==="MIX"?-1:e==="MIX"?1:t-e).forEach(t=>{let r=x(t,"Grubo\u015B\u0107",t!=="MIX");q.appendChild(r)}):console.error("Element #lista-grubosc not found");let M=document.getElementById("lista-szerokosc");M?Array.from(d).sort((t,e)=>t-e).forEach(t=>{let e=x(t,"Szeroko\u015B\u0107");M.appendChild(e)}):console.error("Element #lista-szerokosc not found");let L=document.getElementById("lista-kolor");L?Array.from(A).sort((t,e)=>t-e).forEach(t=>{let e=x(t,"Kolor",!1);L.appendChild(e)}):console.error("Element #lista-kolor not found");let N=document.getElementById("lista-dlugosc");N?Array.from(w).sort((t,e)=>t-e).forEach(t=>{let e=x(t,"D\u0142ugo\u015B\u0107",!0);N.appendChild(e)}):console.error("Element #lista-dlugosc not found");let v=document.getElementById("lista-ilosc");v?Array.from(k).sort((t,e)=>t-e).forEach(t=>{let e=x(t,"Ilo\u015B\u0107",!0);v.appendChild(e)}):console.error("Element #lista-ilosc not found"),window.fsAttributes.cmsfilter.init(),window.fsAttributes.push(["cmsfilter",t=>{let[e]=t,{filtersData:r}=e;function h(){console.log("filtersData:",r),r.forEach(function(l){let{elements:f}=l;f.forEach(function(c){let i=c.value,m=c.resultsCount;Array.from(document.querySelectorAll("[fs-cmsfilter-field]")).filter(function(C){return C.textContent.trim().includes(i)}).forEach(function(C){let p=C.nextElementSibling;p&&p.classList.contains("filter-results-count")&&(p.textContent=m)})})})}h(),e.listInstance.on("renderitems",()=>{h()})}])}catch(E){console.error("Error during CMS load handling:",E)}}await s()}])});})();

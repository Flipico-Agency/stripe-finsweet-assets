"use strict";(()=>{document.addEventListener("DOMContentLoaded",function(){let S=document.querySelector('[fs-cmssort-field="popularity-desc"]');S&&(S.click(),console.log("Klikni\u0119to sortowanie 'Najpopularniejsze'"));let k=document.querySelector('[fs-cmssort-element="trigger"]');k&&(k.dispatchEvent(new Event("w-close")),console.log("Wywo\u0142ano w-close na dropdownie"),window.scrollTo(0,0));function T(o){let s=o.textContent.trim().match(/(\d+(?:\.\d+)?)\s*mb/i);return s?parseFloat(s[1]):null}function _(o){let s=o.textContent.trim().match(/^(\d[\d\s]*)\s?szt\.$/);return s?parseFloat(s[1].replace(/\s+/g,"")):null}function G(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function A(o){let i=parseFloat(o.textContent.trim());if(!isNaN(i)){let s=i*10;return o.textContent=`${s}mm`,s}return null}function V(o,i){let s=i.textContent.trim();if(o.querySelectorAll('option[fs-cmsfilter-field="D\u0142ugo\u015B\u0107"]').length>0)return!0;let g=s.match(/(\d+(?:,\d+)?)\s*mb/);if(g){let E=g[1],f=document.createElement("div");return f.setAttribute("fs-cmsfilter-field","D\u0142ugo\u015B\u0107"),f.textContent=`${E}mb`,f.classList.add("hide"),o.appendChild(f),E}return console.warn("\u26A0\uFE0F Produkt nie ma d\u0142ugo\u015Bci w nazwie"),null}window.fsAttributes=window.fsAttributes||[],window.fsAttributes.push(["cmsload",async o=>{let[i]=o;async function s(){try{let y=function(t,e,d=!0){let c=document.createElement("div");c.className="filters3_item";let l=document.createElement("label");l.className="w-checkbox filters3_form-checkbox1";let m=document.createElement("div");m.className="w-checkbox-input w-checkbox-input--inputType-custom filters3_form-checkbox1-icon";let r=document.createElement("input");r.type="checkbox",r.name="filter",r.style="opacity:0;position:absolute;z-index:-1";let a=document.createElement("span");a.className="filters3_form-checkbox1-label w-form-label",a.textContent=d?`${e==="Ilo\u015B\u0107"?G(t):t}${e==="D\u0142ugo\u015B\u0107"?"mb":e==="Ilo\u015B\u0107"?" szt.":"mm"}`:`${t}`,a.setAttribute("fs-cmsfilter-field",e);let u=document.createElement("span");return u.className="filter-results-count",u.style="margin-left: 10px; font-weight: bold;",u.textContent="0",l.appendChild(m),l.appendChild(r),l.appendChild(a),l.appendChild(u),c.appendChild(l),c};var x=y;await i.renderingQueue,console.log("Wszystko za\u0142adowane!");let g=await i.items,E=new Set,f=new Set,I=new Set,q=new Set,M=new Set;g.forEach((t,e)=>{if(!t||!t.element){console.error(`\u274C B\u0142\u0105d: item.element nie istnieje dla indeksu ${e}`,t);return}t.element.querySelectorAll('[is-variant-select="true"]').forEach((n,p)=>{let D=n.closest('[role="group"]');if(D){let B=D.querySelector("label");if(B?.textContent){let C=B.textContent.trim();if(C==="MIX"){let w=n.closest(".product2_item");if(w){let $=w.querySelector('[fs-cmsfilter-field="Grubo\u015B\u0107"]');$&&($.textContent="MIX",console.log(`\u2705 Ustawiono 'MIX' dla Grubo\u015Bci w select ${p}`))}}n.querySelectorAll("option").forEach(w=>{C==="D\u0142ugo\u015B\u0107"?w.setAttribute("fs-cmsfilter-field","D\u0142ugo\u015B\u0107"):(C==="Komplet"||C==="MIX")&&w.setAttribute("fs-cmsfilter-field","Ilo\u015B\u0107")})}}});let c=t.element.querySelector('[fs-cmsfilter-field="nazwa"]');if(c&&c.textContent?.includes("MIX")){let n=t.element.querySelector('[fs-cmsfilter-field="Grubo\u015B\u0107"]');n&&(n.textContent="MIX")}let l=t.element.querySelector('[fs-cmsfilter-field="Grubo\u015B\u0107"]'),m=t.element.querySelector('[fs-cmsfilter-field="Szeroko\u015B\u0107"]'),r=t.element.querySelector('[fs-cmsfilter-field="Kolor"]'),a=t.element.querySelectorAll('[fs-cmsfilter-field="Ilo\u015B\u0107"]'),u=t.element.querySelectorAll('option[fs-cmsfilter-field="D\u0142ugo\u015B\u0107"]'),b=l?.textContent==="MIX",h=V(t.element,c);if(h!==!0&&h!==null&&I.add(h),l)if(b)E.add("MIX");else{let n=A(l);n!==null&&E.add(n)}if(m){let n=A(m);n!==null&&f.add(n)}r&&r.textContent!==""&&M.add(r.textContent),u.forEach(n=>{let p=T(n);p!==null&&I.add(p.toString())}),a.forEach(n=>{let p=_(n);p!==null&&q.add(p)})});let L=document.getElementById("lista-grubosc");L?Array.from(E).sort((t,e)=>t==="MIX"?-1:e==="MIX"?1:t-e).forEach(t=>{let d=y(t,"Grubo\u015B\u0107",t!=="MIX");L.appendChild(d)}):console.error("Element #lista-grubosc not found");let v=document.getElementById("lista-szerokosc");v?Array.from(f).sort((t,e)=>t-e).forEach(t=>{let e=y(t,"Szeroko\u015B\u0107");v.appendChild(e)}):console.error("Element #lista-szerokosc not found");let z=document.getElementById("lista-kolor");z?Array.from(M).sort((t,e)=>t-e).forEach(t=>{let e=y(t,"Kolor",!1);z.appendChild(e)}):console.error("Element #lista-kolor not found");let N=document.getElementById("lista-dlugosc");N?Array.from(I).sort((t,e)=>t-e).forEach(t=>{let e=y(t,"D\u0142ugo\u015B\u0107",!0);N.appendChild(e)}):console.error("Element #lista-dlugosc not found");let X=document.getElementById("lista-ilosc");X?Array.from(q).sort((t,e)=>t-e).forEach(t=>{let e=y(t,"Ilo\u015B\u0107",!0);X.appendChild(e)}):console.error("Element #lista-ilosc not found"),window.fsAttributes.cmsfilter.init(),window.fsAttributes.push(["cmsfilter",t=>{let[e]=t,{filtersData:d}=e;function c(){console.log("filtersData:",d),d.forEach(function(l){let{elements:m}=l;m.forEach(function(r){let a=r.value,u=r.resultsCount;console.log("filterValue:",a,"resultsNumber:",u);let b=Array.from(document.querySelectorAll("[fs-cmsfilter-field]")).filter(function(h){return h.textContent.trim().includes(a)});console.log("matchingElements:",b),b.forEach(function(h){let n=h.nextElementSibling;n&&n.classList.contains("filter-results-count")&&(n.textContent=u)})})})}c(),e.listInstance.on("renderitems",()=>{c()})}])}catch(g){console.error("Error during CMS load handling:",g)}}await s()}])});})();
